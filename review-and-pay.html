<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>E-LegalBoom Review & Pay</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#f4f6f8;
    margin:0;
    padding:0;
}

.container{
    max-width:600px;
    margin:60px auto;
    background:white;
    padding:30px;
    border-radius:8px;
    box-shadow:0 4px 12px rgba(0,0,0,.1);
}

h2{
    color:#1a2a44;
}

.section{
    margin-top:20px;
}

.row{
    margin-bottom:10px;
}

.label{
    font-weight:bold;
}

button{
    width:100%;
    padding:15px;
    margin-top:25px;
    background:#2d6cdf;
    color:white;
    border:none;
    font-size:18px;
    border-radius:6px;
    cursor:pointer;
}

button:hover{
    background:#1c4fc2;
}
</style>
</head>

<body>

<div class="container">
<h2>Review Your Information</h2>

<div id="reviewDiv"></div>

<button onclick="proceedToPayment()">Proceed To Payment</button>
</div>

<script type="module">

/* ---------------- LOAD INTAKE ---------------- */

const intake = JSON.parse(sessionStorage.getItem("intakeData"));

if(!intake){
    alert("Missing intake data");
    window.location = "catalog.html";
}

/* ---------------- DISPLAY REVIEW ---------------- */

const reviewDiv = document.getElementById("reviewDiv");

reviewDiv.innerHTML = `
<div class="section">
<h3>Order Summary</h3>
<div class="row"><span class="label">Tier:</span> ${intake.tier}</div>
<div class="row"><span class="label">Document:</span> ${intake.doc_type}</div>
<div class="row"><span class="label">Price:</span> $${intake.price}</div>
</div>

<div class="section">
<h3>Customer</h3>
<div class="row">${intake.client_first} ${intake.client_last}</div>
<div class="row">${intake.client_email}</div>
<div class="row">${intake.client_phone}</div>
</div>
`;

/* ---------------- PAYMENT LINK MAP ---------------- */

function getPaymentLink(docType){

const paymentMap = {

    /* Tier 1 */
    "nda" :
    "https://pay.elegalboom.org/e4b79a60-0fd7-431c-8bfc-ae0",

    /* Tier 2 */
    "business_loan_agreement" :
    "https://pay.elegalboom.org/aeda586f-65f5-4bf0-9813-7a2",

    /* Tier 3 */
    "tier_three_documents" :
    "https://pay.elegalboom.org/71ca7144-e537-4fbd-823d-c10",

    /* Tier 4 */
    "ENTREPRENEUR_BUNDLE" :
    "https://pay.elegalboom.org/55c7cd3d-1048-4b8c-aadb-843"

};

return paymentMap[docType];
}

/* ---------------- PAYMENT REDIRECT ---------------- */

window.proceedToPayment = function(){

const payLink = getPaymentLink(intake.doc_type);

if(!payLink){
    alert("Payment link not found for: " + intake.doc_type);
    return;
}

window.location.href = payLink;
}

</script>

</body>
</html>
