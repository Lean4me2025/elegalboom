/* =========================================================
   Catalog / Tier Page – Document Selection Plumbing
   ONE FILE – NO IMPORTS – NO UI CHANGES
   ========================================================= */

/*
  Canonical document registry
  Numeric code = execution signal
  Name = internal identity (not displayed)
*/
const DOCUMENTS = {
  1: { name: 'llc_operating_agreement' },
  2: { name: 'promissory_note' },
  3: { name: 'nda' },
  4: { name: 'consulting_agreement' }
};

// Holds the selected document code
let selectedDocCode = null;

/*
  Call this from your EXISTING UI selection logic.
  Example:
    selectDoc(1)
    selectDoc(2)
*/
window.selectDoc = function (docCode) {
  if (!DOCUMENTS[docCode]) {
    console.error('Invalid document code selected:', docCode);
    return;
  }
  selectedDocCode = docCode;
};

/*
  Continue button handler
  Stores document selection and moves to Intake
*/
document.addEventListener('DOMContentLoaded', () => {
  const continueBtn = document.getElementById('continueBtn');

  if (!continueBtn) {
    console.error('Continue button not found on catalog page');
    return;
  }

  continueBtn.addEventListener('click', () => {
    if (selectedDocCode === null) {
      alert('Please select a document to continue.');
      return;
    }

    const doc = DOCUMENTS[selectedDocCode];

    // Store ONLY what Intake needs
    sessionStorage.setItem('doc_code', String(selectedDocCode));
    sessionStorage.setItem('doc_name', doc.name);

    // Move forward – NO order, NO backend, NO tier, NO price
    window.location.href = '/intake.html';
  });
});
