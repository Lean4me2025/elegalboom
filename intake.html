<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>E-LegalBoom Intake</title>

<style>
body {
  font-family: Arial, sans-serif;
  background:#f5f7fb;
}

.card {
  width:420px;
  margin:40px auto;
  padding:25px;
  background:white;
  border-radius:8px;
  box-shadow:0 2px 10px rgba(0,0,0,.1);
}

input, textarea {
  width:100%;
  padding:10px;
  margin:8px 0 16px;
  border:1px solid #ccc;
  border-radius:4px;
}

button {
  width:100%;
  padding:12px;
  background:#2c5cff;
  color:white;
  border:none;
  border-radius:5px;
  font-size:16px;
  cursor:pointer;
}

button:hover {
  background:#1b48e0;
}
</style>

</head>
<body>

<div class="card">
<h2>Client Intake</h2>

<form id="intakeForm">

<label>First Name</label>
<input name="first_name" required>

<label>Last Name</label>
<input name="last_name" required>

<label>Email</label>
<input name="email" required>

<label>Phone</label>
<input name="phone" required>

<label>Street Address</label>
<input name="street">

<label>City</label>
<input name="city">

<label>State</label>
<input name="state">

<label>Zip</label>
<input name="zip">

<label>Details / Requirements</label>
<textarea name="details"></textarea>

<button type="submit">Continue To Review</button>

</form>
</div>

<script>

/* ===== LOAD ORDER FROM CATALOG ===== */
const order = JSON.parse(sessionStorage.getItem("catalogOrder"))

if(!order){
  alert("Order not found. Please start from catalog.")
  window.location = "catalog.html"
}

/* ===== FORM SUBMIT ===== */
document.getElementById("intakeForm")
.addEventListener("submit", function(e){

  e.preventDefault()

  const formData = new FormData(this)
  const intakeData = Object.fromEntries(formData.entries())

  /* ----- Merge Catalog + Intake ----- */
  const payload = {
    ...order,
    ...intakeData,
    request_uuid: crypto.randomUUID(),
    status: "payment_pending"
  }

  /* ----- Store For Review Page ----- */
  sessionStorage.setItem("intakeData", JSON.stringify(payload))

  /* ----- Move To Review ----- */
  window.location = "review-and-pay.html"

})

</script>

</body>
</html>
