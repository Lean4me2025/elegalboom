<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>E-LegalBoom | Client Intake</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>

<h2>Client Intake</h2>

<form id="intakeForm">

  <label>First Name</label>
  <input id="firstName" required />

  <label>Last Name</label>
  <input id="lastName" required />

  <label>Email</label>
  <input id="email" type="email" required />

  <label>Phone</label>
  <input id="phone" />

  <label>Business / Entity Name</label>
  <input id="business" />

  <label>State / Jurisdiction</label>
  <select id="state" required>
    <option value="">Select State</option>
    <option>Alabama</option><option>Alaska</option><option>Arizona</option><option>Arkansas</option>
    <option>California</option><option>Colorado</option><option>Connecticut</option><option>Delaware</option>
    <option>Florida</option><option>Georgia</option><option>Hawaii</option><option>Idaho</option>
    <option>Illinois</option><option>Indiana</option><option>Iowa</option><option>Kansas</option>
    <option>Kentucky</option><option>Louisiana</option><option>Maine</option><option>Maryland</option>
    <option>Massachusetts</option><option>Michigan</option><option>Minnesota</option><option>Mississippi</option>
    <option>Missouri</option><option>Montana</option><option>Nebraska</option><option>Nevada</option>
    <option>New Hampshire</option><option>New Jersey</option><option>New Mexico</option><option>New York</option>
    <option>North Carolina</option><option>North Dakota</option><option>Ohio</option><option>Oklahoma</option>
    <option>Oregon</option><option>Pennsylvania</option><option>Rhode Island</option><option>South Carolina</option>
    <option>South Dakota</option><option>Tennessee</option><option>Texas</option><option>Utah</option>
    <option>Vermont</option><option>Virginia</option><option>Washington</option><option>West Virginia</option>
    <option>Wisconsin</option><option>Wyoming</option>
  </select>

  <label>Other Party (optional)</label>
  <input id="counterparty" />

  <label>Purpose / Context</label>
  <textarea id="purpose"></textarea>

  <label>Amount (optional)</label>
  <input id="amount" type="number" />

  <label>Effective Date</label>
  <input id="effectiveDate" type="date" />

  <label>Additional Notes</label>
  <textarea id="notes"></textarea>

  <button type="submit">Continue</button>

</form>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
  const SUPABASE_URL = "https://vvjbjfltqsivvxxifnvi.supabase.co";
  const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ2amJqZmx0cXNpdnZ4eGlmbnZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5NzYzNTAsImV4cCI6MjA3MzU1MjM1MH0.F4zzcpCHl9v-Rnj0wgKJ5zBf1HteVyXelMLQDDEN28Q";

  const supabase = window.supabase.createClient(
    SUPABASE_URL,
    SUPABASE_ANON_KEY
  );

  document.getElementById("intakeForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const payload = {
      request_uuid: crypto.randomUUID(),
      client_first_name: firstName.value.trim(),
      client_last_name: lastName.value.trim(),
      client_email: email.value.trim(),
      client_phone: phone.value.trim(),
      client_business_name: business.value.trim(),
      state: state.value
    };

    const { error } = await supabase
      .from("pweb_orders")
      .insert(payload);

    if (error) {
      console.error("Supabase insert error:", error);
      alert("Insert failed. Check console.");
      return;
    }

    alert("Success â€” row inserted into pweb_orders");
  });
</script>

</body>
</html>
